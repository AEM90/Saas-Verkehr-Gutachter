{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ submission.messmethode.name }} â€” Report #{{ submission.pk }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="/static/css/report_template.css">
</head>
<body>
  <header class="report-header">
    <div class="brand">
      <h1 class="brand-name">{{ company_name }}</h1>
      <div class="meta">
        <div>Report: <strong>{{ template.name }}</strong></div>
        <div>Submission ID: <strong>{{ submission.pk }}</strong></div>
        <div>Generated: <strong>{{ submission.created_at }}</strong></div>
      </div>
    </div>
    <hr class="separator">
  </header>

  <main class="report-body">
    <section class="section overview">
      <h2>Overview</h2>
      <p>Messmethode: <strong>{{ submission.messmethode.name }}</strong></p>
      <p>Company: <strong>{{ submission.company }}</strong></p>
    </section>

    <section class="section measurements">
      <h2>Measurements</h2>

      {% comment %}
      The template expects an ordered set of field keys like {{ temperature }}, etc.
      If you want repeated rows (lists), ensure your context includes a list variable,
      e.g., measurements: [{name: "...", value: "..."}, ...] and use a for loop below.
      {% endcomment %}

      <table class="data-table">
        <thead>
          <tr>
            <th>Field</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
        {% for fv in submission.field_values.all %}
          <tr>
            <td class="cell-label">{{ fv.field.label if fv.field else "Field" }}</td>
            <td class="cell-value">
              {% if fv.value_file %}
                [file: {{ fv.value_file.name }}]
              {% else %}
                {{ fv.value_text }}
              {% endif %}
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="2">No data submitted</td></tr>
        {% endfor %}
        </tbody>
      </table>
    </section>

    <section class="section footer-notes">
      <h3>Notes</h3>
      <p>
        This report was generated from the submitted form data.
        Edit the template or the CSS in /static/css/report_template.css to change formatting.
      </p>
    </section>
  </main>

  <footer class="report-footer">
    <hr class="separator">
    <div class="foot">
      <small>Generated by Saas-Verkehr-Gutachter</small>
    </div>
  </footer>
</body>
</html>